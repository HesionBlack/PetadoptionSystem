<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
	<th:block th:include="include :: header('新增角色')" />
	<th:block th:include="include :: ztree-css" />
</head>
<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
		<form class="form-horizontal m" id="form-role-add">
			<div class="form-group">
				<label class="col-sm-3 control-label ">宠物图片：</label>
				<input id="filePath" name="filePath" class="form-control" type="file">
			</div>
		</form>
		<div class="row">
			<div class="col-sm-offset-5 col-sm-10">
				<button type="button" class="btn btn-sm btn-primary" onclick="submitHandler()"><i class="fa fa-check"></i>保 存</button>&nbsp;
				<button type="button" class="btn btn-sm btn-danger" onclick="closeItem()"><i class="fa fa-reply-all"></i>关 闭 </button>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		// function add() {
		// 	var roleName = $("input[name='roleName']").val();
		// 	var roleKey = $("input[name='roleKey']").val();
		// 	var roleSort = $("input[name='roleSort']").val();
		// 	var status = $("input[id='status']").is(':checked') == true ? 0 : 1;
		// 	var remark = $("input[name='remark']").val();
		// 	var menuIds = $.tree.getCheckedNodes();
		// 	$.ajax({
		// 		cache : true,
		// 		type : "POST",
		// 		url : ctx + "system/role/add",
		// 		data : {
		// 			"roleName": roleName,
		// 			"roleKey": roleKey,
		// 			"roleSort": roleSort,
		// 			"status": status,
		// 			"remark": remark,
		// 			"menuIds": menuIds
		// 		},
		// 		async : false,
		// 		error : function(request) {
		// 			$.modal.alertError("系统错误");
		// 		},
		// 		success : function(data) {
		// 			$.operate.successCallback(data);
		// 		}
		// 	});

			function submitHandler() {
				if ($.validate.form()) {
					uploadFile();
				}
			}

			function uploadFile() {
				var formData = new FormData();
				if ($('#filePath')[0].files[0] == null) {
					$.modal.alertWarning("请先选择文件路径");
					return false;
				}
				formData.append('fileName', $("#fileName").val());
				formData.append('file', $('#filePath')[0].files[0]);
				$.ajax({
					url: "/common/upload",
					type: 'post',
					cache: false,
					data: formData,
					processData: false,
					contentType: false,
					dataType: "json",
					success: function(result) {
						$.operate.successCallback(result);
					}
				});
			}
	</script>
</body>
</html>
